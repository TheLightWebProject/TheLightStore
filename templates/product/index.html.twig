{% extends 'base.html.twig' %}

{% block title %}Products Management
{% endblock %}

{% block body %}
	<div class="border my-2">
		<h1 class="text-center">Products List</h1>
		<div class="text-center mb-2">
			<a href="{{ path('add_product') }}" class="btn btn-outline-primary">
				<img src="Image/add.png" alt="Add new" width="16" height="16" border="0"/>Add
			</a>
		</div>
		<table id="tablecategory" class="table table-striped table-bordered m-0" cellspacing="0" width="100%">
			<thead>
				<tr class="text-center">
					<th>
						<strong>No.</strong>
					</th>
					<th>
						<strong>Product Name</strong>
					</th>
					<th>
						<strong>Price</strong>
					</th>
					<th>
						<strong>Quantity</strong>
					</th>
					<th>
						<strong>Brand</strong>
					</th>
					<th>
						<strong>Supplier</strong>
					</th>
					<th>
						<strong>Image</strong>
					</th>
					<th>
						<strong>Edit</strong>
					</th>
					<th>
						<strong>Delete</strong>
					</th>
				</tr>
			</thead>

			<tbody>
				{% if products %}
					{% set count = 1 %}
					{% for product in products %}
						<tr>
							<td class="text-center">
								<a href="{{ path('view_detail_product', { 'id': product.id }) }}" class="text-decoration-none">{{ count }}</a>
							</td>
							<td>{{ product.name }}</td>
							<td class="text-center">${{ product.price }}</td>
							<td class="text-center">{{ product.quantity }}</td>
							<td class="text-center">{{ product.brand }}</td>
							<td class="text-center">{{ product.supplier }}</td>
							<td align='center'>
								<img src='{{ path('get_product_photo', {'filename' : product.image} ) }}' border='0' width="50" height="50"/>
							</td>
							<td style='text-align:center'>
								<a href="{{ path('edit_product', { 'id': product.id }) }}">
									<i class="bi bi-pen-fill" style="color: black;"></i>
								</a>
							</td>
							<td style='text-align:center'>
								<a href="{{ path('delete_product', { 'id': product.id }) }}" onclick="return confirm('Are you sure to delete!')">
									<i class="bi bi-trash-fill" style="color: red;"></i>
								</a>
							</td>
						</tr>
						{% set count = count + 1 %}
					{% endfor %}
				{% else %}
					<tr>
						<td colspan="9" class="text-center fw-bold">
							Product list is empty
						</td>
					</tr>
				{% endif %}
			</tbody>
		</table>
	</div>
{% endblock %}
